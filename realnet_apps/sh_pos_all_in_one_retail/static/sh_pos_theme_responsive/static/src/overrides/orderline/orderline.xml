<templates id="template" xml:space="preserve">
    <t t-name="Orderline" t-inherit="point_of_sale.Orderline" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('product-name')]" position="before">
            <t t-esc="console.log('orderline ', line)"></t>
            <t t-if="pos.models['sh.pos.theme.settings'] and pos.models['sh.pos.theme.settings'].getAll()[0] and pos.models['sh.pos.theme.settings'].getAll()[0].sh_image_display_in_cart and !pos.get_order().finalized and line.product_img">
	            <span class="span_product_image">
                    <img t-att-src="line.product_img" class="cart_product_image" t-att-alt="line.productName" />
	            </span>
	         </t>
             <t t-else="">
             </t>
        </xpath>
        <xpath expr="//div[hasclass('product-name')]//span" position="attributes">
            <attribute name="t-attf-class" add="{{ line.show_custom_line ? 'sh_product_name' : '' }}" separator=" "></attribute>
        </xpath>
        <xpath expr="//div[hasclass('product-name')]//span" position="after">
            <div class="sh_order_line_detail" t-if="line and line.show_custom_line">
                <ul class="sh-info-list d-flex flex-column sh_info_list">
                    <li class="price-per-unit">
                        <span class="qty px-1 border rounded text-bg-view fw-bolder me-1" t-esc="line.qty"/>
                        <t t-if="!props.basic_receipt">
                            x
                            <t t-if="line.price !== 0">
                                <s t-esc="line.oldUnitPrice" t-if="line.oldUnitPrice" />
                                <t t-esc="line.unitPrice" />
                            </t>
                            /
                        </t>
                        <t t-if="line.unit" t-esc="line.unit" />
                    </li>
                    <li t-if="line.price !== 0 and line.discount and line.discount !== '0' and !props.basic_receipt">
                        With a <em><t t-esc="line.discount" />% </em> discount
                    </li>
                    <li t-if="line.customerNote" class="customer-note w-100 p-2 mt-2 rounded text-break text-bg-warning bg-opacity-25">
                        <i class="fa fa-sticky-note me-1" role="img" aria-label="Customer Note" title="Customer Note"/>
                        <t t-esc="line.customerNote" />
                    </li>
                    <div class="internal-note-container d-flex gap-2">
                        <t t-foreach="line.internalNote?.split?.('\n') or []" t-as="note" t-key="note_index">
                            <li t-if="note.trim() !== ''" t-esc="note" class="internal-note badge mt-2 p-2 rounded-pill bg-info text-info bg-opacity-25" style="font-size: 0.85rem;" />
                        </t>
                    </div>
                    <li t-foreach="line.packLotLines or []" t-as="lot" t-key="lot_index" t-esc="lot" />
                    <t t-slot="default" />
                </ul>
            </div>
        </xpath>
        <xpath expr="//div[hasclass('price')]" position="after">
            <t t-slot="sh-product-price"/>
        </xpath>
    </t>
</templates>