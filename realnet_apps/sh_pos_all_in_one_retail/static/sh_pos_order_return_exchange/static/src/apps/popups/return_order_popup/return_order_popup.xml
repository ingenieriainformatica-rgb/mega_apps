<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="sh_pos_return_exchange.ReturnOrderPopup">
        <Dialog title="props.title">
            <div class="popup popup-textarea sh-return-order-popup">
                <div class="modal-body p-0">
                    <table class="sh_return_order_table">
                        <thead class="sh_return_order_thead">
                            <th class="sh_return_order_product_th">Product</th>
                            <th class="sh_return_order_qty_th">Quanatity</th>
                            <th class="sh_return_order_rqty_th">Return Qty</th>
                        </thead>
                        <tbody class="sh_return_order_tbody">
                            <t t-foreach="props.lines" t-as="line" t-key="line.id">
                                <t t-if="line.product_id and (!line.product_id.sh_product_non_returnable or !line.product_id.sh_product_non_exchangeable)" >
                                    <tr t-if="line.qty - line.sh_return_qty">
                                        <td class="sh_return_order_product_td">
                                            <t t-esc="line.product_id.display_name" />
                                        </td>
                                        <td class="sh_return_order_qty_td">
                                            <t t-if="line.sh_return_qty"> 
                                                <t t-esc="line.qty - line.sh_return_qty"></t>
                                            </t>
                                            <t t-else="">
                                                <t t-esc="line.qty" />
                                            </t>
                                        </td>
                                        <td class="sh_return_order_rqty_td">
                                            <input name="sh-qty" class="sh-qty form-control" t-att-max-qty="line.qty - line.sh_return_qty" id="sh_input_qty" t-model="state.return[line.id]" t-att-line-id="line.id" t-on-keyup="() => this.sh_input_qty(line.id, state.return[line.id], (line.qty - line.sh_return_qty))" type="number" />
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                    <t t-if="state.show_exchange_button">
                        <div class="sh_same_product_checkbox">
                            <div class="sh_custom_checkbox_exchange">
                                <label class="sh_custom sh_cust_checkbox" for="exchange_checkbox">Exchange With Same Products
                                    <input type="checkbox" t-model="state.is_exchange_checked" class="form-check-input o_radio_input" id="exchange_checkbox" />
                                    <div class="sh_cust_checkbox_indicator"></div>
                                </label>
                            </div>
                        </div>
                    </t>
                </div>
    
                <t t-set-slot="footer">
    
                    <t t-if="state.show_return_buttons">
                        <div class="btn btn-primary btn-md lh-lg o-default-button complete_return" t-on-click="sh_total_retun">
                            Complete Return
                        </div>
                        <div class="btn btn-primary btn-md lh-lg o-default-button return" t-on-click="sh_retun">
                            Return
                        </div>
                    </t>
                    <t t-if="state.show_exchange_button">
                        <div class="btn btn-primary btn-md lh-lg o-default-button complete_exchange" t-on-click="sh_total_exchange">
                            Complete Exchange
                        </div>
                        <div class="btn btn-primary btn-md lh-lg o-default-button exchange" t-on-click="sh_exchange">
                            Exchange
                        </div>
                    </t>
                    <div class="btn btn-secondary btn-md lh-lg o-default-button" t-on-click="cancel">
                        Cancel
                    </div>
                </t>
            </div>
        </Dialog>
    </t>

</templates>
