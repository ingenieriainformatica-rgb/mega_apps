<odoo>
  <record id="view_account_payment_tree_inherit_consecutivos_realnet" model="ir.ui.view">
    <field name="name">account.payment.tree.consecutivos.realnet.inherit</field>
    <field name="model">account.payment</field>
    <field name="inherit_id" ref="account.view_account_payment_tree"/>
    <field name="arch" type="xml">
      <!-- Replace the entire list to ensure only CE/CI is shown instead of internal Number -->
      <xpath expr="//list" position="replace">
        <list edit="false" sample="1" decoration-info="state == 'draft'" decoration-muted="state == 'canceled'">
          <header>
            <button name="action_post" type="object" string="Confirm"/>
          </header>
          <field name="company_currency_id" column_invisible="True"/>
          <field name="available_payment_method_line_ids" column_invisible="True"/>
          <field name="date" readonly="state in ['cancel', 'in_process']"/>
          <!-- Our CE/CI column -->
          <field name="x_ceci_number" string="CE/CI"/>
          <field name="journal_id"/>
          <field name="company_id" optional="hide" groups="base.group_multi_company"/>
          <field name="payment_method_line_id" context="{'hide_payment_journal_id': 1}"/>
          <field name="partner_id" string="Customer"/>
          <field name="amount_signed" string="Amount in Currency" optional="hide" groups="!base.group_multi_currency"/>
          <field name="amount_signed" string="Amount in Currency" optional="show" groups="base.group_multi_currency"/>
          <field name="currency_id" string="Payment Currency" optional="hide"/>
          <field name="activity_ids" widget="list_activity" optional="hide"/>
          <field name="amount_company_currency_signed" widget="monetary" string="Amount" sum="Total"/>
          <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state == 'in_process'"/>
        </list>
      </xpath>
    </field>
  </record>

  <record id="view_account_payment_search_inherit_consecutivos_realnet" model="ir.ui.view">
    <field name="name">account.payment.search.consecutivos.realnet.inherit</field>
    <field name="model">account.payment</field>
    <field name="inherit_id" ref="account.view_account_payment_search"/>
    <field name="arch" type="xml">
      <xpath expr="//search" position="inside">
        <field name="x_ceci_number" string="Número CE/CI"/>
        <field name="x_ceci_type" string="Tipo CE/CI"/>
      </xpath>
    </field>
  </record>

  <!-- FORM VIEW: Mostrar CE/CI en el título -->
  <record id="view_account_payment_form_inherit_consecutivos_realnet" model="ir.ui.view">
    <field name="name">account.payment.form.consecutivos.realnet.inherit</field>
    <field name="model">account.payment</field>
    <field name="inherit_id" ref="account.view_account_payment_form"/>
    <field name="priority">50</field>
    <field name="arch" type="xml">
      <!-- Reemplazar el título por nuestro display que muestra CE/CI o el nombre interno como fallback -->
      <xpath expr="//div[@class='oe_title']/h1/field[@name='name']" position="replace">
        <field name="x_ceci_display" readonly="1"/>
      </xpath>

      <!-- Nota: Se eliminaron XPaths que intentaban ocultar campos x_ceci_* si estaban presentes en la vista principal,
           porque fallaban cuando dichos campos no estaban definidos en esa vista. -->
    </field>
  </record>
</odoo>
